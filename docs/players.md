# Players

When a player connects to the server, the client sends over the player's id and a new Player Object is created for the player. The player is then available to be interacted with through the `playerConnected` signal dispatched by the players module.

Table of Contents

- [Properties](#properties)
- [Signals](#signals)
- [API](#api)

## **Properties**

### **id**

This is the id for the player, this id is generated by the client or retrieved from a saved cookie if the player is a returning player.

```js
const id = player.id;
```

### **ip**

This is the most probably ip for the player. The IP is retrieved from either the `x-forwarded-for` headers or from the remote address of the player.

```js
const ip = player.ip;
```

## **Signals**

Since there is no exact timing with WebSockets, we rely on signals to know when things have occurred. After getting the Player Object from the signal you can use any method from the API section defined below on them. 

If you're new to signals check out [hypergiant](https://github.com/robertcorponoi/hypergiant) to see the signals that gameguard is using.

Each player has the following signals that can be responded to:

### **playerConnected**

This is dispatched when the player has joined and their Player Object has been created by the server. This signal is dispatched with the client's player object. 

```js
gameguard.players.playerConnected.add(player => {
  console.log(player);
});
```

### **playerDisconnected**

This is dispatched when the player has left the server through either being disconnected, kicked, or banned. This signal is dispatched with the client's player object. 

```js
gameguard.players.playerDisconnected.add(player => {
  console.log(player);
});
```

### **playerRejected**

This is dispatched when the player attempts to connect to the server but is kicked because they are banned. This signal is dispatched with the id of the player that was rejected.

```js
gameguard.players.playerRejected.add(playerId => {
  console.log(playerId);
});
```

### **playerKicked**

This is dispatched when the player has been kicked from the server. This signal is dispatched with the client's player object and the reason as to why they were kicked.

```js
gameguard.players.playerKicked.add((player, reason) => {
  console.log(player, reason);
});
```

### **playerBanned**

This is dispatched when the player has been banned from the server. This signal is dispatched with the client's player object and the reason that they were banned.

```js
gameguard.players.playerBanned.add((player, reason) => {
  console.log(player, reason);
});
```

## **API**

### **message**

Sends a message to just this player.

| param   	| type   	| description                                                                  	| default 	|
|---------	|--------	|------------------------------------------------------------------------------	|---------	|
| type    	| string 	| The type of message this is. This helps you decipher messages on the client. 	|         	|
| contents 	| string 	| The conents of the message to send to this player.                                        	|         	|

```js
gameguard.players.playerConnected.add(player => player.message('info', 'Hello there!'));
```

### **kick**

Kick a player from the server. This ends their connection to the game server but they can join again by refreshing.

| param  	| type   	| description                                                                                                                                        	| default 	|
|--------	|--------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string 	| The reason as to why this player was kicked from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|

```js
gameguard.players.playerConnected.add(player => player.kick('cheating'));
```

### **ban**

Bans the player from the server. This ends their connection to the game server and sets their id/IP as banned so that they can't join again.

| param  	| type    	| description                                                                                                                                        	| default 	|
|--------	|---------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string  	| The reason as to why this player was kicked from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|
| useIP  	| boolean 	| Indicates whether the Player's IP should be banned instead of just their individual id.                                                            	|         	|

```js
gameguard.players.playerConnected.add(player => player.ban('cheating'));
```
