# **Room**

At it's core, GameGuard works around watching for clients trying to connect to the server and turning those clients into players. Once connected, players can be interacted with in forms of messaging, kicking, banning, or placing in rooms.

## **Table of Contents**

- [Signals](#signals)
- [Properties](#properties)
- [API](#api)

## **Signals**

### **roomCreated**

The `roomCreated` signal is dispatched from the base GameGuard object when a room is created. This signal includes the Room object of the room that was created.

```js
gameguard.roomCreated.add(room => console.log(`Room ${room.name} created.`));
```

### **roomDestroyed**

The `roomDestroyed` signal is dispatched from the GameGuard object when a room is destroyed. This signal includes the Room object of the room that was destroyed.

```js
gameguard.roomDestroyed.add(room => console.log(`Room ${room.name} destroyed.`));
```

## **Properties**

### **id**

The id of the player. The player's id is retrieved by the client on connection and stored in the client's cookies.

### **ip**

The most probably ip address of the player. the ip is retrieved from either the `x-forwarded-for` headers or from the remote address of the player's request header.

### **latency**

The latency between the server and client which is calculated every x milliseconds depending on the value of the `latencyCheckInterval` option.

## **API**

### **message**

Sends a message to the player.

| param   	| type   	| description                                                                  	| default 	|
|---------	|--------	|------------------------------------------------------------------------------	|---------	|
| type    	| string 	| The type of message this is. This helps you decipher messages on the client. 	|         	|
| contents 	| string 	| The conents of the message to send to this player.                            |         	|

### **kick**

Kick the player from the server. This ends their connection to the game server but they can join again by refreshing.

| param  	| type   	| description                                                                                                                                        	| default 	|
|--------	|--------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string 	| The reason as to why this player was kicked from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|

```js
gameguard.playerConnected.add(player => player.kick('cheating'));
```

### **ban**

Bans the player from the server. This ends their connection to the game server and sets their id/IP as banned so that they can't join again.

| param  	| type    	| description                                                                                                                                        	| default 	|
|--------	|---------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string  	| The reason as to why this player was banned from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|

```js
gameguard.playerConnected.add(player => player.ban('cheating'));
```










































# Player

When a player connects to the server, the client sends over the player's id and a new Player Object is created for the player. The player is then available to be interacted with through the `connected` signal dispatched by the players module.

Table of Contents

- [Properties](#properties)
- [API](#api)

## **Properties**

### **id**

This is the id for the player, this id is generated by the client or retrieved from a saved cookie if the player is a returning player.

```js
const id = player.id;
```

### **ip**

This is the most probably ip for the player. The IP is retrieved from either the `x-forwarded-for` headers or from the remote address of the player.

```js
const ip = player.ip;
```

### **latency**

The latency between the server and client which is calculated every x milliseconds according to the `latencyCheckInterval` option.

```js
const interval = player.inverval;
```

## **API**

### **message**

Sends a message to just this player.

| param   	| type   	| description                                                                  	| default 	|
|---------	|--------	|------------------------------------------------------------------------------	|---------	|
| type    	| string 	| The type of message this is. This helps you decipher messages on the client. 	|         	|
| contents 	| string 	| The conents of the message to send to this player.                                        	|         	|

```js
gameguard.players.connected.add(player => player.message('info', 'Hello there!'));
```

### **kick**

Kick a player from the server. This ends their connection to the game server but they can join again by refreshing.

| param  	| type   	| description                                                                                                                                        	| default 	|
|--------	|--------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string 	| The reason as to why this player was kicked from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|

```js
gameguard.players.connected.add(player => player.kick('cheating'));
```

### **ban**

Bans the player from the server. This ends their connection to the game server and sets their id/IP as banned so that they can't join again.

| param  	| type    	| description                                                                                                                                        	| default 	|
|--------	|---------	|----------------------------------------------------------------------------------------------------------------------------------------------------	|---------	|
| reason 	| string  	| The reason as to why this player was kicked from the server. This reason is sent to the client and from there you can use it to inform the player. 	|         	|
| useIP  	| boolean 	| Indicates whether the Player's IP should be banned instead of just their individual id.                                                            	|         	|

```js
gameguard.players.connected.add(player => player.ban('cheating'));
```



















# Rooms

A Room Object is returned whenever you create a new room using the [rooms](./rooms.md) module.

Table of Contents

- [Properties](#properties)
- [API](#api)

## **Properties**

### **name**

Returns the name of the room.

```js
const roomName = room1.name;
```

### **playerCount**

Returns the number of players currently in the room.

```js
const roomPlayerCount = room1.playerCount;
```

### **players**

Returns an Array of the Player Objects currently in the room.

```js
const roomPlayers = room1.players;
```

### **capacity**

Returns the maximum amount of players that can be in the room.

```js
const roomCapacity = room1.capacity;
```

### **capacity**

A setter property that allows you to set a new max capacity for the room. If the new capacity is lower than the current number of players in the room, an error will be thrown so it's recommended to wrap this in a try catch.

| param       	| type   	| description                         	| default 	|
|-------------	|--------	|-------------------------------------	|---------	|
| newCapacity 	| number 	| The new max capacity for this room. 	|         	|

```js
room1.capacity(20);
```

## **API**

### **add**

Adds a player to the room.

| param  	| type   	| description                    	| default 	|
|--------	|--------	|--------------------------------	|---------	|
| player 	| Player 	| The player to add to this room 	|         	|

```js
gameguard.players.on('player-joined', (player) => room1.add(player));
```

### **remove**

Removes a player from the room.

| param  	| type   	| description                         	| default 	|
|--------	|--------	|-------------------------------------	|---------	|
| player 	| Player 	| The player to remove from this room 	|         	|

```js
room1.remove(player);
```

### **clear**

Removes all players from the room.

```js
room1.clear();
```

### **broadcast**

Sends a message to every player in the room.

| param   	| type   	| description                                                                  	| default 	|
|---------	|--------	|------------------------------------------------------------------------------	|---------	|
| type    	| string 	| The type of message this is. This helps you decipher messages on the client. 	|         	|
| contents 	| string 	| The conents of the message to send to every player in this room.                                      	|         	|